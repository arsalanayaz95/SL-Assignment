{"ast":null,"code":"import { v4 as uuidv4 } from \"uuid\";\nimport { typeOfStatus } from \"../constant/status\";\nexport function updateTaskById(id, data, property, value) {\n  if (data.task_id === id) {\n    data[property] = value;\n    data[\"key\"] = uuidv4();\n  }\n\n  if (data.children !== null && data.children.length > 0) {\n    for (let i = 0; i < data.children.length; i++) {\n      data.children[i] = updateTaskById(id, data.children[i], property, value);\n    }\n  }\n\n  return data;\n}\nexport function addChildToTask(parentId, data, task) {\n  if (data.task_id === parentId) {\n    if (data.children === null) {\n      data.children = [task];\n      data[\"key\"] = uuidv4();\n    } else {\n      data.children.push(task);\n    } //UPDATE QUERY\n\n  }\n\n  if (data.children !== null && data.children.length > 0) {\n    for (let i = 0; i < data.children.length; i++) {\n      data.children[i] = addChildToTask(parentId, data.children[i], task);\n    }\n  }\n\n  return data;\n}\nexport function updateGrandparent(taskId, incomingData, status) {\n  incomingData.forEach(element => {\n    const grandParentsStatus = getCurrentStatus(element, taskId);\n\n    if (grandParentsStatus === typeOfStatus.DONE || grandParentsStatus === typeOfStatus.COMPLETE) {\n      updateTaskById(taskId, element, \"status\", status);\n    }\n\n    const GP = getParentId(element, taskId);\n    if (GP) updateGrandparent(GP, incomingData);\n  });\n}\nexport function getParentId(element, matchingId) {\n  if (element.task_id === matchingId) {\n    return element.parentId;\n  } else if (element.children !== null) {\n    let result = null;\n\n    for (let i = 0; result === null && i < element.children.length; i++) {\n      result = getParentId(element.children[i], matchingId);\n    }\n\n    return result;\n  }\n\n  return null;\n}\nexport function getCurrentStatus(element, matchingId) {\n  if (element.task_id === matchingId) {\n    return element.status;\n  } else if (element.children !== null) {\n    let result = null;\n\n    for (let i = 0; result === null && i < element.children.length; i++) {\n      result = getCurrentStatus(element.children[i], matchingId);\n    }\n\n    return result;\n  }\n\n  return null;\n}","map":{"version":3,"names":["v4","uuidv4","typeOfStatus","updateTaskById","id","data","property","value","task_id","children","length","i","addChildToTask","parentId","task","push","updateGrandparent","taskId","incomingData","status","forEach","element","grandParentsStatus","getCurrentStatus","DONE","COMPLETE","GP","getParentId","matchingId","result"],"sources":["/Users/aayaz/Desktop/Code/streamline/client/src/utils/helpers.js"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { typeOfStatus } from \"../constant/status\";\n\nexport function updateTaskById(id, data, property, value) {\n  if (data.task_id === id) {\n    data[property] = value;\n    data[\"key\"] = uuidv4();\n  }\n  if (data.children !== null && data.children.length > 0) {\n    for (let i = 0; i < data.children.length; i++) {\n      data.children[i] = updateTaskById(id, data.children[i], property, value);\n    }\n  }\n  return data;\n}\n\nexport function addChildToTask(parentId, data, task) {\n  if (data.task_id === parentId) {\n    if (data.children === null) {\n      data.children = [task];\n      data[\"key\"] = uuidv4();\n    } else {\n      data.children.push(task);\n    }\n    //UPDATE QUERY\n  }\n  if (data.children !== null && data.children.length > 0) {\n    for (let i = 0; i < data.children.length; i++) {\n      data.children[i] = addChildToTask(parentId, data.children[i], task);\n    }\n  }\n  return data;\n}\n\nexport function updateGrandparent(taskId, incomingData, status) {\n    incomingData.forEach((element) => {\n      const grandParentsStatus = getCurrentStatus(element, taskId);\n      if (\n        grandParentsStatus === typeOfStatus.DONE ||\n        grandParentsStatus === typeOfStatus.COMPLETE\n      ) {\n        updateTaskById(taskId, element, \"status\", status);\n    \n      }\n      const GP = getParentId(element, taskId);\n      if(GP) updateGrandparent(GP, incomingData)\n    });\n}\n\nexport function getParentId(element, matchingId){\n  if (element.task_id === matchingId) {\n    return element.parentId;\n  } else if (element.children !== null) {\n    let result = null;\n    for (let i = 0; result === null && i < element.children.length; i++) {\n      result = getParentId(element.children[i], matchingId);\n    }\n    return result;\n  }\n  return null;\n}\n\nexport function getCurrentStatus(element, matchingId) {\n  if (element.task_id === matchingId) {\n    return element.status;\n  } else if (element.children !== null) {\n    let result = null;\n    for (let i = 0; result === null && i < element.children.length; i++) {\n      result = getCurrentStatus(element.children[i], matchingId);\n    }\n    return result;\n  }\n  return null;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}